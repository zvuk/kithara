[package]
name = "kithara"
version = "0.1.0"
edition.workspace = true
authors.workspace = true
license.workspace = true
repository.workspace = true
description = "Facade crate for audio streaming with auto-detection (file / HLS)"

[lints]
workspace = true

[dependencies]
kithara-audio = { workspace = true }
kithara-decode = { workspace = true }
kithara-events = { workspace = true }
kithara-platform = { workspace = true }
kithara-play = { workspace = true }
kithara-stream = { workspace = true }
kithara-file = { workspace = true, optional = true }
kithara-hls = { workspace = true, optional = true }
kithara-assets = { workspace = true, optional = true }
kithara-storage = { workspace = true, optional = true }
kithara-net = { workspace = true, optional = true }
kithara-abr = { workspace = true, optional = true }
kithara-bufpool = { workspace = true }
kithara-drm = { workspace = true, optional = true }
rodio = { workspace = true, optional = true }
tokio = { workspace = true, features = ["full"] }
tokio-util = { workspace = true, features = ["full"] }
url = { workspace = true }

[features]
default = ["file", "hls"]
file = ["dep:kithara-file", "dep:kithara-assets", "dep:kithara-net", "kithara-play/file"]
hls = ["dep:kithara-hls", "dep:kithara-abr", "dep:kithara-assets", "dep:kithara-net", "dep:kithara-drm", "kithara-play/hls"]
assets = ["dep:kithara-assets", "dep:kithara-storage"]
net = ["dep:kithara-net"]
bufpool = []
test-utils = [
    "kithara-audio/test-utils",
    "kithara-decode/test-utils",
    "kithara-stream/test-utils",
    "kithara-play/test-utils",
]
rodio = ["dep:rodio", "kithara-audio/rodio", "kithara-play/rodio"]
perf = [
    "kithara-audio/perf",
    "kithara-decode/perf",
    "kithara-stream/perf",
    "kithara-bufpool/perf",
    "kithara-hls/perf",
    "kithara-net/perf",
]
full = ["file", "hls", "assets", "net", "bufpool"]

[dev-dependencies]
tokio = { workspace = true }
rstest = { workspace = true }
tracing = { workspace = true }
tracing-subscriber = { workspace = true }
rodio = { workspace = true }
url = { workspace = true }

[[example]]
name = "resource_rodio"
required-features = ["rodio"]

[[example]]
name = "file_audio"
required-features = ["rodio"]

[[example]]
name = "hls_audio"
required-features = ["rodio"]

[[example]]
name = "hls_drm_audio"
required-features = ["rodio"]

[[example]]
name = "file_rodio"
required-features = ["rodio"]

[[example]]
name = "hls_rodio"
required-features = ["rodio"]
