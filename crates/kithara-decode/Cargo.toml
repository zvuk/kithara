[package]
name = "kithara-decode"
version = "0.1.0"
edition.workspace = true
authors.workspace = true
license.workspace = true
description = "Synchronous audio decoding via Symphonia with PCM output"

[lints]
workspace = true

[dependencies]
kithara-stream = { workspace = true }
kithara-bufpool = { workspace = true }
symphonia = { workspace = true }
thiserror = { workspace = true }
tracing = { workspace = true }
hotpath = { workspace = true, optional = true }
unimock = { workspace = true, optional = true }

[target.'cfg(any(target_os = "macos", target_os = "ios"))'.dependencies]
core-foundation = { workspace = true, optional = true }
core-foundation-sys = { workspace = true, optional = true }

[features]
default = []
perf = ["dep:hotpath", "hotpath/hotpath"]
apple = ["dep:core-foundation", "dep:core-foundation-sys"]
android = []
test-utils = ["unimock"]

[dev-dependencies]
rstest = { workspace = true }
unimock = { workspace = true }
